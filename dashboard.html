<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Maria Flor</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Overlay Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <i class="fas fa-utensils"></i>
                <span class="logo-text">Maria Flor</span>
            </div>
            <button class="toggle-btn" id="toggleBtn">
                <i class="fas fa-bars"></i>
            </button>
        </div>

        <nav class="sidebar-nav">
            <ul>
                <li>
                    <a href="#dashboard" class="nav-link active" data-page="dashboard">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#vendas" class="nav-link" data-page="vendas">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Vendas</span>
                    </a>
                </li>
                <li>
                    <a href="#mesas" class="nav-link" data-page="mesas">
                        <i class="fas fa-chair"></i>
                        <span>Mesas</span>
                    </a>
                </li>
                <li>
                    <a href="#pedidos" class="nav-link" data-page="pedidos">
                        <i class="fas fa-clipboard-list"></i>
                        <span>Pedidos</span>
                    </a>
                </li>
                <li>
                    <a href="#cardapio" class="nav-link" data-page="cardapio">
                        <i class="fas fa-book"></i>
                        <span>Cardápio</span>
                    </a>
                </li>
                <li>
                    <a href="#estoque" class="nav-link" data-page="estoque">
                        <i class="fas fa-boxes"></i>
                        <span>Estoque</span>
                    </a>
                </li>
                <li>
                    <a href="#financeiro" class="nav-link" data-page="financeiro">
                        <i class="fas fa-dollar-sign"></i>
                        <span>Financeiro</span>
                    </a>
                </li>
                <li>
                    <a href="#usuarios" class="nav-link" data-page="usuarios">
                        <i class="fas fa-users"></i>
                        <span>Usuários</span>
                    </a>
                </li>
                <li>
                    <a href="#relatorios" class="nav-link" data-page="relatorios">
                        <i class="fas fa-file-alt"></i>
                        <span>Relatórios</span>
                    </a>
                </li>
                <li>
                    <a href="#configuracoes" class="nav-link" data-page="configuracoes">
                        <i class="fas fa-cog"></i>
                        <span>Configurações</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <span class="user-name" id="userName">Admin</span>
                    <span class="user-role">Administrador</span>
                </div>
            </div>
            <button class="btn-logout" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Sair</span>
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button class="mobile-toggle" id="mobileToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="page-title" id="pageTitle">Dashboard</h1>
            </div>
            <div class="header-right">
                <div class="header-search">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Buscar...">
                </div>
                <button class="header-btn">
                    <i class="fas fa-bell"></i>
                    <span class="badge">3</span>
                </button>
                <div class="header-user">
                    <span id="headerUserName">Admin</span>
                    <div class="user-avatar-small">
                        <i class="fas fa-user"></i>
                    </div>
                </div>
            </div>
        </header>

        <!-- Content Area -->
        <div class="content">
            <!-- Dashboard Content -->
            <div id="dashboard-content" class="page-content active">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-value" id="totalRevenue">R$ 0,00</span>
                            <span class="stat-label">Receita Hoje</span>
                        </div>
                    </div>
                    <div class="stat-card green">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-value" id="totalSales">0</span>
                            <span class="stat-label">Vendas Hoje</span>
                        </div>
                    </div>
                    <div class="stat-card orange">
                        <div class="stat-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-value" id="totalOrders">0</span>
                            <span class="stat-label">Pedidos Ativos</span>
                        </div>
                    </div>
                    <div class="stat-card purple">
                        <div class="stat-icon">
                            <i class="fas fa-chair"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-value" id="occupiedTables">0/12</span>
                            <span class="stat-label">Mesas Ocupadas</span>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Vendas dos Últimos 7 Dias</h3>
                            <button class="btn-icon">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3>Produtos Mais Vendidos</h3>
                            <button class="btn-icon">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                        </div>
                        <canvas id="productsChart"></canvas>
                    </div>
                </div>

                <!-- Recent Orders -->
                <div class="recent-orders">
                    <div class="section-header">
                        <h3>Pedidos Recentes</h3>
                        <a href="#pedidos" class="btn-link">Ver todos</a>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Mesa</th>
                                    <th>Itens</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody id="recentOrdersTable">
                                <!-- Dados dinâmicos -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Outras páginas serão carregadas dinamicamente -->
            <div id="vendas-content" class="page-content"></div>
            <div id="mesas-content" class="page-content"></div>
            <div id="pedidos-content" class="page-content"></div>
            <div id="cardapio-content" class="page-content"></div>
            <div id="estoque-content" class="page-content"></div>
            <div id="financeiro-content" class="page-content"></div>
            <div id="usuarios-content" class="page-content"></div>
            <div id="relatorios-content" class="page-content"></div>
            <div id="configuracoes-content" class="page-content"></div>
        </div>
    </main>

    <!-- Modal de Notificação -->
    <div id="notification" class="notification"></div>

    <!-- Modal de Venda -->
    <div id="modalVenda" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalVendaTitle">Nova Venda</h3>
                <button class="modal-close" onclick="fecharModalVenda()">&times;</button>
            </div>
            <form id="formVenda" onsubmit="salvarVenda(event)">
                <div class="form-group">
                    <label>Mesa *</label>
                    <select id="vendaMesa" required>
                        <option value="">Selecione uma mesa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Itens *</label>
                    <textarea id="vendaItens" required placeholder="Ex: Hambúrguer, Batata Frita, Coca-Cola"></textarea>
                </div>
                <div class="form-group">
                    <label>Total (R$) *</label>
                    <input type="number" id="vendaTotal" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label>Forma de Pagamento *</label>
                    <select id="vendaPagamento" required>
                        <option value="Dinheiro">Dinheiro</option>
                        <option value="Cartão">Cartão</option>
                        <option value="Pix">Pix</option>
                        <option value="Débito">Débito</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="vendaStatus" required>
                        <option value="Pago">Pago</option>
                        <option value="Pendente">Pendente</option>
                    </select>
                </div>
                <input type="hidden" id="vendaId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalVenda()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Estoque -->
    <div id="modalEstoque" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalEstoqueTitle">Novo Item de Estoque</h3>
                <button class="modal-close" onclick="fecharModalEstoque()">&times;</button>
            </div>
            <form id="formEstoque" onsubmit="salvarEstoque(event)">
                <div class="form-group">
                    <label>Nome do Item *</label>
                    <input type="text" id="estoqueNome" required placeholder="Ex: Carne Bovina">
                </div>
                <div class="form-group">
                    <label>Categoria *</label>
                    <select id="estoqueCategoria" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="carnes">Carnes</option>
                        <option value="laticinios">Laticínios</option>
                        <option value="hortifruti">Hortifrúti</option>
                        <option value="bebidas">Bebidas</option>
                        <option value="temperos">Temperos</option>
                        <option value="massas">Massas</option>
                        <option value="outros">Outros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Quantidade *</label>
                    <input type="number" id="estoqueQuantidade" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label>Quantidade Mínima *</label>
                    <input type="number" id="estoqueMinimo" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label>Unidade *</label>
                    <select id="estoqueUnidade" required>
                        <option value="kg">Quilograma (kg)</option>
                        <option value="un">Unidade (un)</option>
                        <option value="L">Litro (L)</option>
                        <option value="g">Grama (g)</option>
                        <option value="cx">Caixa (cx)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Data de Validade *</label>
                    <input type="date" id="estoqueValidade" required>
                </div>
                <div class="form-group">
                    <label>Custo Unitário (R$) *</label>
                    <input type="number" id="estoqueCusto" step="0.01" min="0" required>
                </div>
                <input type="hidden" id="estoqueId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalEstoque()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Transação Financeira -->
    <div id="modalTransacao" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTransacaoTitle">Nova Transação</h3>
                <button class="modal-close" onclick="fecharModalTransacao()">&times;</button>
            </div>
            <form id="formTransacao" onsubmit="salvarTransacao(event)">
                <div class="form-group">
                    <label>Data *</label>
                    <input type="date" id="transacaoData" required>
                </div>
                <div class="form-group">
                    <label>Tipo *</label>
                    <select id="transacaoTipo" required onchange="atualizarCategoriasTransacao()">
                        <option value="receita">Receita</option>
                        <option value="despesa">Despesa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Categoria *</label>
                    <select id="transacaoCategoria" required>
                        <option value="">Selecione uma categoria</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Descrição *</label>
                    <textarea id="transacaoDescricao" required placeholder="Descreva a transação"></textarea>
                </div>
                <div class="form-group">
                    <label>Valor (R$) *</label>
                    <input type="number" id="transacaoValor" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="transacaoStatus" required>
                        <option value="pago">Pago</option>
                        <option value="pendente">Pendente</option>
                    </select>
                </div>
                <input type="hidden" id="transacaoId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalTransacao()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Usuário -->
    <div id="modalUsuario" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalUsuarioTitle">Novo Usuário</h3>
                <button class="modal-close" onclick="fecharModalUsuario()">&times;</button>
            </div>
            <form id="formUsuario" onsubmit="salvarUsuario(event)">
                <div class="form-group">
                    <label>Nome Completo *</label>
                    <input type="text" id="usuarioNome" required placeholder="Ex: João Silva">
                </div>
                <div class="form-group">
                    <label>E-mail *</label>
                    <input type="email" id="usuarioEmail" required placeholder="usuario@email.com">
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" id="usuarioTelefone" placeholder="(11) 99999-9999">
                </div>
                <div class="form-group">
                    <label>Função *</label>
                    <select id="usuarioRole" required>
                        <option value="">Selecione uma função</option>
                        <option value="admin">Administrador</option>
                        <option value="gerente">Gerente</option>
                        <option value="garcom">Garçom</option>
                        <option value="cozinha">Cozinha</option>
                        <option value="caixa">Caixa</option>
                    </select>
                </div>
                <div class="form-group" id="senhaGroup">
                    <label>Senha *</label>
                    <input type="password" id="usuarioSenha" placeholder="Mínimo 6 caracteres">
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="usuarioStatus" required>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>
                <input type="hidden" id="usuarioId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalUsuario()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Produto (Cardápio) -->
    <div id="modalProduto" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalProdutoTitle">Novo Produto</h3>
                <button class="modal-close" onclick="fecharModalProduto()">&times;</button>
            </div>
            <form id="formProduto" onsubmit="salvarProduto(event)">
                <div class="form-group">
                    <label>Nome do Produto *</label>
                    <input type="text" id="produtoNome" required placeholder="Ex: Hambúrguer Artesanal">
                </div>
                <div class="form-group">
                    <label>Categoria *</label>
                    <select id="produtoCategoria" required>
                        <option value="">Selecione uma categoria</option>
                        <option value="lanches">Lanches</option>
                        <option value="pizzas">Pizzas</option>
                        <option value="saladas">Saladas</option>
                        <option value="bebidas">Bebidas</option>
                        <option value="sobremesas">Sobremesas</option>
                        <option value="pratos">Pratos Principais</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Descrição *</label>
                    <textarea id="produtoDescricao" required placeholder="Descreva o produto"></textarea>
                </div>
                <div class="form-group">
                    <label>Preço (R$) *</label>
                    <input type="number" id="produtoPreco" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label>Tempo de Preparo *</label>
                    <input type="text" id="produtoTempo" required placeholder="Ex: 20 min">
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="produtoStatus" required>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label style="display:flex; align-items:center; gap:10px; cursor:pointer;">
                        <input type="checkbox" id="produtoDestaque">
                        <span>Produto em Destaque</span>
                    </label>
                </div>
                <input type="hidden" id="produtoId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalProduto()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Mesa -->
    <div id="modalMesa" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalMesaTitle">Nova Mesa</h3>
                <button class="modal-close" onclick="fecharModalMesa()">&times;</button>
            </div>
            <form id="formMesa" onsubmit="salvarMesa(event)">
                <div class="form-group">
                    <label>Número da Mesa *</label>
                    <input type="number" id="mesaNumero" required min="1">
                </div>
                <div class="form-group">
                    <label>Capacidade *</label>
                    <input type="number" id="mesaCapacidade" required min="1" placeholder="Número de pessoas">
                </div>
                <div class="form-group">
                    <label>Localização *</label>
                    <select id="mesaLocalizacao" required>
                        <option value="">Selecione a localização</option>
                        <option value="Salão Principal">Salão Principal</option>
                        <option value="Varanda">Varanda</option>
                        <option value="Salão VIP">Salão VIP</option>
                        <option value="Área Externa">Área Externa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="mesaStatus" required>
                        <option value="livre">Livre</option>
                        <option value="ocupada">Ocupada</option>
                        <option value="reservada">Reservada</option>
                    </select>
                </div>
                <input type="hidden" id="mesaId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalMesa()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Pedido -->
    <div id="modalPedido" class="modal" style="display:none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalPedidoTitle">Novo Pedido</h3>
                <button class="modal-close" onclick="fecharModalPedido()">&times;</button>
            </div>
            <form id="formPedido" onsubmit="salvarPedido(event)">
                <div class="form-group">
                    <label>Mesa *</label>
                    <select id="pedidoMesa" required>
                        <option value="">Selecione uma mesa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Itens do Pedido *</label>
                    <textarea id="pedidoItens" required placeholder="Ex: Hambúrguer, Batata Frita, Coca-Cola"></textarea>
                </div>
                <div class="form-group">
                    <label>Total (R$) *</label>
                    <input type="number" id="pedidoTotal" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label>Prioridade *</label>
                    <select id="pedidoPrioridade" required>
                        <option value="normal">Normal</option>
                        <option value="alta">Alta</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Status *</label>
                    <select id="pedidoStatus" required>
                        <option value="pendente">Pendente</option>
                        <option value="preparando">Em Preparo</option>
                        <option value="pronto">Pronto</option>
                        <option value="entregue">Entregue</option>
                    </select>
                </div>
                <input type="hidden" id="pedidoId">
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="fecharModalPedido()">Cancelar</button>
                    <button type="submit" class="btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/api-client.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
